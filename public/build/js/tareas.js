!function(){const e=document.querySelector("#agregar-tarea"),t={0:"Pendiente",1:"Completa"},a=(e,t,a,n=3e3)=>{const o=document.createElement("DIV");o.classList.add("alerta",t),o.textContent=e,a.insertAdjacentElement("beforebegin",o),setTimeout((()=>o.remove()),1e3*n)},n=()=>{const e=new URLSearchParams(window.location.search),{id:t}=Object.fromEntries(e.entries());return t};!async function(){try{const e="/api/tareas?id="+n(),a=await fetch(e),o=await a.json();if(200!==a.status)return;const{tareas:r}=o;(e=>{const a=document.querySelector("#listado-tareas");if(0===e.length){const e=document.createElement("LI");return e.textContent="No hay tareas",e.classList.add("no-tareas"),void a.append(e)}e.forEach((e=>{const n=document.createElement("LI");n.dataset.id=e.id,n.classList.add("tarea");const o=document.createElement("P");o.textContent=e.nombre;const r=document.createElement("DIV");r.classList.add("opciones");const s=document.createElement("BUTTON");s.classList.add("estado-tarea",`${t[e.estado].toLowerCase()}`),s.dataset.estado=e.estado,s.textContent=t[e.estado];const c=document.createElement("BUTTON");c.classList.add("eliminar-tarea"),c.dataset.id=e.id,c.textContent="Eliminar",r.append(s,c),n.append(o,r),a.append(n)}))})(r)}catch(e){console.log(e)}}();e.addEventListener("click",(e=>{const t=document.createElement("DIV");t.classList.add("modal"),t.innerHTML=' \n            <form class="formulario nueva-tarea">\n                <legend>Añande una nueva tarea</legend>\n                <div class="campo">\n                    <label for="tarea">Tarea</label>\n                    <input\n                        type="text"\n                        name="tarea"\n                        id="tarea"\n                        placeholder="Nueva tarea al proyecto"\n                    />\n                </div>\n                <div class="opciones">\n                    <input type="submit" class="submit-nueva-tarea" value="Añadir tarea"/>\n                    <button type="button" class="cerrar-modal" value="Añadir tarea">Cancelar</button>\n\n                </div>\n            </form>\n        ',document.querySelector(".dashboard").appendChild(t);const o=document.querySelector(".formulario"),r=document.querySelector("#tarea");setTimeout((()=>{o.classList.add("animar")}),0),t.addEventListener("click",(async e=>{if(e.preventDefault(),(e.target.classList.contains("modal")||e.target.classList.contains("cerrar-modal"))&&(o.classList.remove("animar"),setTimeout((()=>t.remove()),300)),e.target.classList.contains("submit-nueva-tarea")){const e=r.value.trim();if(!e)return void a("El nombre es obligatorio","error",o.querySelector(".campo"));(async e=>{const t=new FormData;t.append("nombre",e),t.append("url",n());try{const e=await fetch("/api/tarea",{method:"POST",body:t}),n=await e.json();if(201!==e.status)return a(n.mensaje,"error",document.querySelector(".contenido .contenedor-nueva-tarea"),6)}catch(e){a("Algo salio mal, intentelo de nuevo, si el problema persiste contacte al soporte","error",document.querySelector(".contenido .contenedor-nueva-tarea"),6)}})(e),o.classList.remove("animar"),setTimeout((()=>t.remove()),300)}}))}))}();